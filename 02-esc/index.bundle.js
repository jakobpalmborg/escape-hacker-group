(()=>{"use strict";var e,t,n,a,i={748:(e,t,n)=>{n.d(t,{E:()=>i});let a=[];async function i(){const e=await fetch("https://lernia-sjj-assignments.vercel.app/api/challenges");return(await e.json()).challenges.forEach((e=>{a.push(e)})),a}},10:(e,t,n)=>{n.a(e,(async(e,t)=>{try{var a=n(748),i=n(929);const l=document.querySelector(".challenge-list");function s(e){e.sort((function(e,t){return t.rating-e.rating}));let t=[];t.push(e[0],e[1],e[2]),(0,i.X)(t,l)}s(await(0,a.E)()),document.querySelector(".main-nav-toggle").addEventListener("click",(()=>{document.querySelector(".main-nav").classList.toggle("open")})),document.querySelector("h1").addEventListener("click",(()=>{window.location.href="index.html"})),t()}catch(o){t(o)}}),1)},823:(e,t,n)=>{let a,i,l,s,o,c,d,r,u,p;function m(e){const t=(new Date).toLocaleDateString();c=parseInt(e.target.dataset.id),d=e.target.dataset.minparticipants,r=e.target.dataset.maxparticipants,p=e.target.dataset.title;let n=document.querySelector("body");u=document.createElement("div"),u.className="modal-div",u.innerHTML=`\n\t\t<div class="modalContents">\n        <div class="bookingStep1Content">\n        <form action="">\n        <h1>Book room "${p}" (step 1)</h1>\n        <h2>What date would you like to come?</h2>\n            <label class="modalInputLabels" for="date">Date</label>\n\t\t\t\n            <input id="date" class="input-field" type="date" name="date"\n            min="${t}">\n            <input id="firstButton" type="submit" value="Search available times" class="button primary open-modal-step-2">\n        </form>\n        </div>\n\t\t</div>\n    `,n.appendChild(u),document.querySelector(".open-modal-step-2").addEventListener("click",v),(document.querySelector(".modal-div").style.position="fixed")&&(document.querySelector("body").style.overflow="hidden")}function v(e){e.preventDefault();let t=!1,n=document.querySelector("#date");if(""==n.value){function a(){n.style.outline="none"}n.style.outline="solid 2px red",n.addEventListener("click",a)}""!==n.value&&(t=!0),t&&(o=document.querySelector("#date").value,async function(e,t){const n=await fetch(`https://lernia-sjj-assignments.vercel.app/api/booking/available-times?date=${e}&challenge=${t}`);(await n.json()).slots.forEach((e=>{!function(e){let t=document.createElement("option");t.innerHTML=e,document.querySelector("#time").appendChild(t)}(e)}))}(o,c),function(e){e.preventDefault(),u.innerHTML=`\n\t\t<div class="modalContents">\n        <div class="bookingStep2Content">\n        <form action="">\n        <h1>Book room "${p}" (step 2)</h1>\n            <label class="modalInputLabels" for="name">Name</label>\n\t\t\t\t\t\t<input class="input-field" type="text" id="name" name="name">\n\t\t\t\t\t\t<label class="modalInputLabels" for="e-mail">E-mail</label>\n\t\t\t\t\t\t<input class="input-field" type="email" id="e-mail" name="e-mail">\n\t\t\t\t\t\t<label class="modalInputLabels" for="phoneNumber">Phone</label>\n\t\t\t\t\t\t<input class="input-field" type="number" id="phoneNumber" name="phoneNumber">\n\t\t\t\t\t\t<label class="modalInputLabels" for="time">What time?</label>\n\t\t\t\t\t\t<select class="input-field" name="time" id="time">\n            </select>\n\t\t\t\t\t\t<label class="modalInputLabels" for="participants">How many participants? (${d} - ${r})</label>\n\t\t\t\t\t\t<input class="input-field" type="number" name="participants" id="participants">\n            </input>\n            <input id="secondButton" class="button primary open-modal-step-3" type="submit" value="Submit booking">\n        </form>\n        </div>\n\t\t</div>\n    `,document.querySelector(".open-modal-step-3").addEventListener("click",h)}(e))}function h(e){e.preventDefault();let t=!1,n=document.querySelector("#phoneNumber"),p=document.querySelector("#participants"),m=document.querySelector("#name"),v=document.querySelector("#e-mail");if(""==m.value){function h(){m.style.outline="none"}m.style.outline="solid 2px red",m.addEventListener("click",h)}else if(""==v.value){function f(){v.style.outline="none"}v.style.outline="solid 2px red",v.addEventListener("click",f)}else if(""==n.value||10!==n.value.length){function y(){n.style.outline="none"}n.style.outline="solid 2px red",n.addEventListener("click",y)}else if(p.value<parseInt(d)){function b(){p.style.outline="none"}p.style.outline="solid 2px red",p.addEventListener("click",b)}else if(p.value>parseInt(r)){function g(){p.style.outline="none"}p.style.outline="solid 2px red",p.addEventListener("click",g)}else t=!0;t&&(a=document.querySelector("#name").value,i=document.querySelector("#e-mail").value,l=document.querySelector("#time").value,s=parseInt(document.querySelector("#participants").value),async function(){const e=await fetch("https://lernia-sjj-assignments.vercel.app/api/booking/reservations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({challenge:c,name:a,email:i,date:o,time:l,participants:s})});await e.json()}(),function(e){e.preventDefault(),u.innerHTML='\n\t<div class="modalContents">\n\t<div class="bookingStep3Content">\n    <h1>Thank you!</h1>\n    <a href="challenges.html">Back to challenges</a>\n    </div>\n\t</div>\n'}(e))}n.d(t,{h:()=>m})},929:(e,t,n)=>{n.d(t,{X:()=>i});var a=n(823);function i(e,t){if(t.innerHTML="",0!=e.length)for(let n=0;n<e.length;n++){const{id:i,type:l,rating:s,title:o,description:c,minParticipants:d,maxParticipants:r,image:u}=e[n];let p=document.createElement("li");p.classList.add("challenge-item");let m=document.createElement("img");m.classList.add("challenge-image"),m.src=u,p.append(m);let v=document.createElement("img");v.classList.add("room-image"),v.src="onsite"==l?"static/iconOnsite.svg":"static/iconOnline.svg",p.append(v);let h=document.createElement("h3");h.classList.add("challenge-title"),h.textContent=o,p.appendChild(h);let f=document.createElement("ul");f.classList.add("rating");let y=document.createElement("li");y.classList.add("rating-star"),f.appendChild(y);let b=document.createElement("li");b.classList.add("rating-star"),f.appendChild(b);let g=document.createElement("li");g.classList.add("rating-star"),f.appendChild(g);let L=document.createElement("li");L.classList.add("rating-star"),f.appendChild(L);let S=document.createElement("li");S.classList.add("rating-star"),f.appendChild(S),s<1?y.classList.add("rating-star"):1==s||s<2?y.classList.add("active"):2==s||s<3?(y.classList.add("active"),b.classList.add("active")):3==s||s<4?(y.classList.add("active"),b.classList.add("active"),g.classList.add("active")):4==s||s<5?(y.classList.add("active"),b.classList.add("active"),g.classList.add("active"),L.classList.add("active")):(y.classList.add("active"),b.classList.add("active"),g.classList.add("active"),L.classList.add("active"),S.classList.add("active")),p.appendChild(f);let E=document.createElement("small");E.classList.add("challenge-meta"),E.innerHTML=`${d} - ${r} participants`,p.appendChild(E);let k=document.createElement("p");k.classList.add("challenge-description"),k.textContent=c,p.appendChild(k);let w=document.createElement("button");w.classList.add("btnBook","button","primary"),w.setAttribute("data-id",i),w.setAttribute("data-minparticipants",d),w.setAttribute("data-maxparticipants",r),w.setAttribute("data-title",o),w.textContent="onsite"==l?"Book this room":"Take challenge online",p.appendChild(w),w.addEventListener("click",a.h),t.appendChild(p)}else t.innerHTML="<p class='filter-error'>No matching challenges.</p>"}}},l={};function s(e){var t=l[e];if(void 0!==t)return t.exports;var n=l[e]={exports:{}};return i[e](n,n.exports,s),n.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",a=e=>{e&&!e.d&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},s.a=(i,l,s)=>{var o;s&&((o=[]).d=1);var c,d,r,u=new Set,p=i.exports,m=new Promise(((e,t)=>{r=t,d=e}));m[t]=p,m[e]=e=>(o&&e(o),u.forEach(e),m.catch((e=>{}))),i.exports=m,l((i=>{var l;c=(i=>i.map((i=>{if(null!==i&&"object"==typeof i){if(i[e])return i;if(i.then){var l=[];l.d=0,i.then((e=>{s[t]=e,a(l)}),(e=>{s[n]=e,a(l)}));var s={};return s[e]=e=>e(l),s}}var o={};return o[e]=e=>{},o[t]=i,o})))(i);var s=()=>c.map((e=>{if(e[n])throw e[n];return e[t]})),d=new Promise((t=>{(l=()=>t(s)).r=0;var n=e=>e!==o&&!u.has(e)&&(u.add(e),e&&!e.d&&(l.r++,e.push(l)));c.map((t=>t[e](n)))}));return l.r?d:s()}),(e=>(e?r(m[n]=e):d(p),a(o)))),o&&(o.d=0)},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s(10)})();